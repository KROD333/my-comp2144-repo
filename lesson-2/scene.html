<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson 2 - Import Model | COMP2144</title>
    <style>
        /* STEP 1: Have a look at some of the interesting CSS used to make sure the entire browser window object is used for the purpose of the Babylon.js Web app */
        html,
        body {
            overflow: hidden;
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }  
        #renderCanvas {
            width: 100%;
            height: 100%;
            touch-action: none;
        }
    </style>
    <!-- STEP 2: Examine the JavaScript dependencies served up from a CDN - which is fine for development -->  
    <script src="https://cdn.babylonjs.com/babylon.js"></script>
    <script src="https://cdn.babylonjs.com/loaders/babylonjs.loaders.min.js"></script>
    <!-- The below script tag is used to include PEP.js (Performance Evaluation Profiler) - a JavaScript library that helps you measure the performance of your web application (credit Gemini 1.5). -->
    <script src="https://code.jquery.com/pep/0.4.3/pep.js"></script>
</head>
<body>
    <!-- STEP 3: Create a canvas element with an id, and set the touch-action attribute to "none" -->
    <canvas id="renderCanvas" touch-action="none"></canvas>
    <!-- touch-action="none" for best results from PEP -->
 
    <script>
        // STEP 4: Get the canvas element as a const
        const canvas = document.querySelector("#renderCanvas");
        // STEP 5: Create the BABYON 3D engine, and attach it to the canvas
        const engine = new BABYLON.Engine(canvas, true);
        // STEP 6: Build the createScene function
        const createScene = function() {
            // STEP 8a: Create a new BABYLON scene, passing in the engine as an argument
            const scene = new BABYLON.Scene(engine);
            const box = BABYLON.MeshBuilder.CreateBox("box", {}); // Create box mesh object
            const sphere = BABYLON.MeshBuilder.CreateSphere("sphere", {}, scene);
            sphere.position.y = 2;
            let material = new BABYLON.StandardMaterial("material", scene);
            material.diffuseColor = new BABYLON.Color3(1.0, 0.0, 0.0);
            sphere.material = material;
            const camera = new BABYLON.ArcRotateCamera("camera", -Math.PI / 2, Math.PI / 2.5, 15, new BABYLON.Vector3(0, 0, 0)); // Add Arc Rotate Camera
            camera.attachControl(canvas, true); // Attach camera control to the canvas
            // Replace the above camera with the below XR if you have a headset
            // const xr = scene.createDefaultXRExperienceAsync();

            // First additional mesh: Torus
            var torus = BABYLON.MeshBuilder.CreateTorus("torus", {diameter: 3, thickness: 1}, scene);
            torus.position = new BABYLON.Vector3(1, 1, 7);

            // Second additional mesh: Cylinder
            var cylinder = BABYLON.MeshBuilder.CreateCylinder("cylinder", {height: 3, diameter: 1}, scene);
            cylinder.position = new BABYLON.Vector3(1, 1, 7);

            // Third additional mesh: Cone
            var cone = BABYLON.MeshBuilder.CreateCylinder("cone", {height: 3, diameterTop: 0, diameterBottom: 3}, scene);
            cone.position = new BABYLON.Vector3(-3, 2, 3);

            // Green colour for the cone
            var greenMat = new BABYLON.StandardMaterial("greenMat", scene);
            greenMat.diffuseColor = new BABYLON.Color3(0, 1, 0);
            cone.material = greenMat;

            // Blue colour for the cylinder
            var blueMat = new BABYLON.StandardMaterial("blueMat", scene);
            blueMat.diffuseColor = new BABYLON.Color3(0, 0, 1);
            cylinder.material = blueMat;

            // Yellow colour for the torus
            var yellowMat = new BABYLON.StandardMaterial("yellowMat", scene);
            yellowMat.diffuseColor = new BABYLON.Color3(1, 1, 0);
            torus.material = yellowMat;
 
            const light = new BABYLON.HemisphericLight("light", new BABYLON.Vector3(1, 1, 0));
            // STEP 8b: Return the scene
            return scene;
        }
        // STEP 7: Call the createScene function
        const scene = createScene();
        // STEP 8: Use the runRenderLoop() method to render the scene repeatedly
        engine.runRenderLoop(function() {
            scene.render();
        });
        // STEP 9: Add an event listener that adapts to the user resizing the screen
        window.addEventListener("resize", function() {
            engine.resize();
        });
        // STEP 10: Move the page up to a server (maybe GitHub Pages) and try it out!
    </script>
</body>
</html>